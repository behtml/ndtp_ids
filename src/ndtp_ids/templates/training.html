<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <title>IDS - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ–±—É—á–µ–Ω–∏–µ–º</title>
</head>
<body style="font-family: Arial, sans-serif; margin: 0; padding: 20px; background: #f5f5f5;">
    <h1>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∂–∏–º–æ–º –æ–±—É—á–µ–Ω–∏—è</h1>
    <a href="/">‚Üê –ù–∞–∑–∞–¥</a>
    <div style="background: white; padding: 20px; border-radius: 5px; margin: 20px 0;">
        <h2>–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –æ–±—É—á–µ–Ω–∏—è</h2>
        <div id="training-stats"></div>
    </div>
    <div id="hosts-training" style="margin-top: 20px;"></div>
    <script>
        function loadData() {
            fetch('/api/stats').then(r => r.json()).then(data => {
                document.getElementById('training-stats').innerHTML = `
                    <p>–í—Å–µ–≥–æ —Ö–æ—Å—Ç–æ–≤: ${data.total_hosts}</p>
                    <p>–í —Ä–µ–∂–∏–º–µ –æ–±—É—á–µ–Ω–∏—è: ${data.learning_hosts}</p>
                    <p>–í —Ä–µ–∂–∏–º–µ –¥–µ—Ç–µ–∫—Ü–∏–∏: ${data.detection_hosts}</p>
                `;
            });
            
            fetch('/api/hosts').then(r => r.json()).then(data => {
                document.getElementById('hosts-training').innerHTML = data.hosts.map(h => 
                    `<div style="background: white; padding: 15px; margin: 10px 0; border-radius: 5px;">
                        <strong>${h.src_ip}</strong>
                        <span style="color: ${h.is_learning ? '#f39c12' : '#2ecc71'};">
                            ${h.is_learning ? 'üü° –û–±—É—á–µ–Ω–∏–µ' : 'üü¢ –î–µ—Ç–µ–∫—Ü–∏—è'}
                        </span>
                        <div style="margin-top: 10px;">
                            –ù–∞–±–ª—é–¥–µ–Ω–∏–π: ${h.samples_count} | 
                            –°–æ–µ–¥–∏–Ω–µ–Ω–∏–π (—Å—Ä–µ–¥–Ω–µ–µ): ${h.connections_mean}
                        </div>
                    </div>`
                ).join('');
            });
        }
        loadData();
        setInterval(loadData, 5000);
    </script>
</body>
</html>
